{"version":3,"sources":["./src/app/analysis/analysis-routing.module.ts","./src/app/analysis/analysis.module.ts","./src/app/analysis/components/analysis-list/analysis-list.component.ts","./src/app/analysis/components/analysis-list/analysis-list.component.html","./src/app/analysis/components/analysis/analysis.component.ts","./src/app/analysis/components/analysis/analysis.component.html"],"names":[],"mappings":"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","file":"analysis-analysis-module-es2015.js","sourcesContent":["import { AnalysisListComponent } from './components/analysis-list/analysis-list.component';\nimport { AnalysisComponent } from './components/analysis/analysis.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AnalysisListComponent\n  },\n  {\n    path: 'create',\n    component: AnalysisComponent\n  },\n  {\n    path: 'edit/:id',\n    component: AnalysisComponent\n  }\n\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AnalysisRoutingModule { }\n","import { RouterModule } from '@angular/router';\nimport { MaterialModule } from './../material/material.module';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AnalysisRoutingModule } from './analysis-routing.module';\nimport { AnalysisComponent } from './components/analysis/analysis.component';\nimport { SharedModule } from '../shared/shared.module';\nimport { AnalysisListComponent } from './components/analysis-list/analysis-list.component';\n\n\n@NgModule({\n  declarations: [AnalysisComponent, AnalysisListComponent],\n  imports: [\n    CommonModule,\n    AnalysisRoutingModule,\n    MaterialModule,\n    SharedModule,\n    ReactiveFormsModule,\n    RouterModule\n  ]\n})\nexport class AnalysisModule { }\n","import { ProyectoService } from './../../../core/services/proyecto/proyecto.service';\nimport { Proyecto } from './../../../core/models/proyecto.model';\nimport { AnalisisUnitarioService } from 'src/app/core/services/analisis-unitario/analisis-unitario.service';\nimport { AnalisisUnitario } from './../../../core/models/analisis-unitario.model';\nimport { Component, OnInit } from '@angular/core';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-analysis-list',\n  templateUrl: './analysis-list.component.html',\n  styleUrls: ['./analysis-list.component.scss']\n})\nexport class AnalysisListComponent implements OnInit {\n\n  analisisUnitarios: AnalisisUnitario[];\n  proyecto: Proyecto;\n  resultsLength: number;\n\n  displayedColumns = ['codigo', 'descripcion', 'unidad', 'precio', 'edit', 'delete'];\n\n  constructor(\n    private analisisUnitarioService: AnalisisUnitarioService,\n    private proyectoService: ProyectoService\n  ) { }\n\n  ngOnInit() {\n    this.proyectoService.project$.pipe(\n      switchMap(\n        (proyecto) => {\n          this.proyecto = proyecto;\n          return this.analisisUnitarioService.getAnalisisUnitarioByProyectoId(proyecto.id);\n        }\n      )\n    ).subscribe(\n      (results) => {\n        this.analisisUnitarios = results.result;\n        this.resultsLength = results.totalRegister;\n      }\n    );\n  }\n\n}\n","<mat-card>\n    <mat-card-header>\n        <mat-card-title>\n            Análisis Unitarios\n        </mat-card-title>\n        <a mat-button color=\"primary\" [routerLink]=\"['/analysis/create']\">CREAR NUEVO ANÁLISIS UNITARIO</a>\n    </mat-card-header>\n    <mat-card-content>\n        <table mat-table [dataSource]=analisisUnitarios class=\"mat-elevation-z8\">\n            <!--Columna codigo-->\n            <ng-container matColumnDef=\"codigo\">\n                <th mat-header-cell *matHeaderCellDef> Código </th>\n                <td mat-cell *matCellDef=\"let item\">\n                    {{item.codigo}}\n                </td>\n            </ng-container>\n\n            <!--Columna Descripcion-->\n            <ng-container matColumnDef=\"descripcion\">\n                <th mat-header-cell *matHeaderCellDef> Descripción </th>\n                <td mat-cell *matCellDef=\"let item\">\n                    {{item.descripcion}}\n                </td>\n            </ng-container>\n\n            <!--Columna unidad-->\n            <ng-container matColumnDef=\"unidad\">\n                <th mat-header-cell *matHeaderCellDef> Unidad </th>\n                <td mat-cell *matCellDef=\"let item\">\n                    {{item.unidad}}\n                </td>\n            </ng-container>\n\n            <!--Columna Precio Unidad-->\n            <ng-container matColumnDef=\"precio\">\n                <th mat-header-cell *matHeaderCellDef> Precio Unidad </th>\n                <td mat-cell *matCellDef=\"let item\">\n                    {{(item.valorUnitario | currency)}}\n                </td>\n            </ng-container>\n\n            <!--Boton Editar-->\n            <ng-container matColumnDef=\"edit\">\n                <th mat-header-cell *matHeaderCellDef></th>\n                <th mat-header-cell *matHeaderCellDef> </th>\n                <td mat-cell *matCellDef=\"let item; let index = index\">\n                    <a mat-icon-button [routerLink]=\"['/analysis/edit', item.id]\">\n                        <mat-icon>edit</mat-icon>\n                    </a>\n                </td>\n                <td mat-footer-cell *matFooterCellDef></td>\n            </ng-container>\n\n            <!--Boton Eliminar-->\n            <ng-container matColumnDef=\"delete\">\n                <th mat-header-cell *matHeaderCellDef></th>\n                <th mat-header-cell *matHeaderCellDef> Porcentaje </th>\n                <td mat-cell *matCellDef=\"let item; let index = index\">\n                    <button mat-icon-button aria-label=\"Example icon-button with a heart icon\">\n                        <mat-icon>delete</mat-icon>\n                    </button>\n                </td>\n                <td mat-footer-cell *matFooterCellDef></td>\n            </ng-container>\n\n\n            <tr mat-header-row *matHeaderRowDef=displayedColumns></tr>\n            <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\n        </table>\n    </mat-card-content>\n</mat-card>","import { DetalleService } from './../../../core/services/detalle/detalle.service';\nimport { AnalisisUnitarioService } from './../../../core/services/analisis-unitario/analisis-unitario.service';\nimport { ProyectoService } from './../../../core/services/proyecto/proyecto.service';\nimport { Proyecto } from './../../../core/models/proyecto.model';\nimport { TableComponent } from './../../../shared/components/table/table.component';\nimport { Detalle } from './../../../core/models/detalle';\nimport { AnalisisUnitario } from './../../../core/models/analisis-unitario.model';\nimport { RecursoBasico } from './../../../core/models/recurso-basico.model';\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { switchMap, map } from 'rxjs/operators';\nimport { ActivatedRoute, Params } from '@angular/router';\n\n@Component({\n  selector: 'app-analysis',\n  templateUrl: './analysis.component.html',\n  styleUrls: ['./analysis.component.scss']\n})\nexport class AnalysisComponent implements OnInit {\n\n  form: FormGroup;\n  analisisUnitario: AnalisisUnitario;\n  proyecto: Proyecto;\n  id = 0;\n  isProcesing = false;\n\n  @ViewChild(TableComponent, { static: false })\n  private tableComponent: TableComponent;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private proyectoService: ProyectoService,\n    private analisisUnitarioService: AnalisisUnitarioService,\n    private detalleService: DetalleService,\n    private route: ActivatedRoute\n  ) {\n    this.buildForm();\n  }\n\n  ngOnInit() {\n    this.proyectoService.project$.subscribe(\n      (proyecto) => {\n        this.proyecto = proyecto;\n      }\n    );\n    this.route.params\n      .pipe(switchMap((params: Params) => {\n        this.id = (params.id) ? params.id : 0;\n        console.log(this.id);\n        return this.analisisUnitarioService.getAnalisisUnitarioById(this.id);\n      }))\n      .subscribe((analisisUnitario) => {\n        this.analisisUnitario = analisisUnitario;\n        console.log(analisisUnitario);\n        this.buildForm();\n      });\n  }\n\n  private buildForm() {\n    this.form = this.formBuilder.group({\n      codigo: [(this.analisisUnitario) ? this.analisisUnitario.codigo : '', [Validators.required]],\n      descripcion: [(this.analisisUnitario) ? this.analisisUnitario.descripcion : '', [Validators.required]],\n      unidad: [(this.analisisUnitario) ? this.analisisUnitario.unidad : '', [Validators.required]],\n    });\n  }\n\n  addResource(recurso: RecursoBasico) {\n    console.log(recurso);\n    const detalle: Detalle = {\n      id: 0,\n      analisisUnitarioId: (this.analisisUnitario) ? this.id : 0,\n      codigo: recurso.codigo,\n      descripcion: recurso.descripcion,\n      unidad: recurso.unidad,\n      precio: recurso.precio,\n      rendimiento: 1,\n      detalleDe: 'recurso',\n      subTotal: recurso.precio\n    };\n    this.tableComponent.addRow(detalle, true);\n  }\n\n  createAnalisis(detalles: Detalle[]) {\n    this.isProcesing = true;\n    console.log(detalles);\n    const valorUnitario = detalles.map(d => d.subTotal).reduce((acc, value) => acc + value, 0);\n    const analisisUnitario: AnalisisUnitario = {\n      id: Number(this.id),\n      codigo: this.form.get('codigo').value,\n      descripcion: this.form.get('descripcion').value,\n      unidad: this.form.get('unidad').value,\n      detalles: null,\n      proyectoId: this.proyecto.id,\n      valorUnitario: Math.round(valorUnitario)\n    };\n    console.log(analisisUnitario);\n    if (this.id === 0) {\n      this.postAnalysis(analisisUnitario, detalles);\n    } else {\n      this.putAnalysis(analisisUnitario, detalles);\n    }\n  }\n\n  postAnalysis(analisisUnitario: AnalisisUnitario, detalles: Detalle[]) {\n    this.analisisUnitarioService.postAnalisisUnitario(analisisUnitario).subscribe(\n      (response) => {\n        console.log(response);\n        // this.analisisUnitario = response;\n        detalles.forEach((d) => {\n          this.postDetalle(d, response.id);\n        });\n      },\n      (error) => {\n        console.error(error.error);\n        this.isProcesing = false;\n      }\n    );\n  }\n\n  putAnalysis(analisisUnitario, detalles: Detalle[]) {\n    // analisisUnitario.id = 0;\n    this.analisisUnitarioService.putAnalisisUnitario(analisisUnitario, this.id).subscribe(\n      (response) => {\n        console.log(response);\n        analisisUnitario.id = this.id;\n        // this.analisisUnitario = response;\n      },\n      (error) => {\n        console.error(error.error);\n        this.isProcesing = false;\n      }\n    );\n    detalles.forEach((d) => {\n      if (d.analisisUnitarioId === 0) {\n        this.postDetalle(d, this.id);\n      } else {\n        this.putDetalle(d);\n      }\n    });\n  }\n\n  postDetalle(detalle: Detalle, id: number) {\n    detalle.analisisUnitarioId = id;\n    this.detalleService.postDetalle(detalle).subscribe(\n      (resp) => {\n        console.log(resp);\n        this.isProcesing = false;\n      },\n      (error) => {\n        console.log(error.error);\n        this.isProcesing = false;\n      }\n    );\n  }\n\n  putDetalle(detalle: Detalle) {\n    this.detalleService.putDetalle(detalle).subscribe(\n      (resp) => {\n        console.log(resp);\n        this.isProcesing = false;\n      },\n      (error) => {\n        console.log(error.error);\n        this.isProcesing = false;\n      }\n    );\n  }\n\n}\n","<form [formGroup]=\"form\">\n    <mat-grid-list cols=\"7\" rowHeight=\"350px\">\n        <mat-grid-tile [colspan]=\"4\" [rowspan]=\"2\">\n            <mat-card class=\"full-width full-height\">\n                <mat-card-header>\n                    <mat-card-title>\n                        Item\n                    </mat-card-title>\n                </mat-card-header>\n                <mat-card-content>\n                    <div class=\"row\">\n                        <div class=\"col\">\n                            <mat-form-field class=\"full-width\">\n                                <input placeholder=\"Codigo\" formControlName=\"codigo\" matInput type=\"text\">\n                            </mat-form-field>\n                        </div>\n                        <div class=\"col\">\n                            <mat-form-field class=\"full-width\">\n                                <input placeholder=\"Unidad\" formControlName=\"unidad\" matInput type=\"text\">\n                            </mat-form-field>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col\">\n                            <mat-form-field class=\"full-width\">\n                                <textarea placeholder=\"Descripcion\" formControlName=\"descripcion\" matInput type=\"text\"\n                                    matTextareaAutosize matAutosizeMinRows=3 matAutosizeMaxRows=6></textarea>\n                            </mat-form-field>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col\">\n                            <app-table (save)=\"createAnalisis($event)\" [isProcesing]=\"isProcesing\" [analisisId]=\"id\"></app-table>\n                        </div>\n                    </div>\n\n                </mat-card-content>\n            </mat-card>\n        </mat-grid-tile>\n        <mat-grid-tile [colspan]=\"3\" [rowspan]=\"2\">\n            <div class=\"full-width full-height\">\n                <app-table-resource (recursoSelected)=\"addResource($event)\"></app-table-resource>\n            </div>\n        </mat-grid-tile>\n    </mat-grid-list>\n\n\n</form>"],"sourceRoot":"webpack:///"}