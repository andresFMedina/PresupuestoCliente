(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Q59l:function(t,c,e){"use strict";e.r(c);var o=e("3Pt+"),i=e("hctd"),a=e("fXoL"),n=e("ofXK"),r=e("eIep"),s=e("YIVz"),l=e("yp1H"),d=e("MSSf"),b=e("tmTa"),u=e("Xlwt"),m=e("TY1r");const p=["mat-table","",1,"mat-elevation-z8",3,"dataSource"],h=["matColumnDef","codigo"],f=["mat-header-cell","",4,"matHeaderCellDef"],g=["mat-cell","",4,"matCellDef"],C=["matColumnDef","descripcion"],y=["matColumnDef","unidad"],Z=["matColumnDef","cantidad"],w=["matColumnDef","precio"],v=["matColumnDef","parcial"],D=["matColumnDef","aporte"],G=["matColumnDef","delete"],H=["mat-footer-cell","",4,"matFooterCellDef"],I=["mat-header-row","",4,"matHeaderRowDef"],P=["mat-row","",4,"matRowDef","matRowDefColumns"],S=["mat-raised-button","","color","primary","type","button",3,"disabled","click"],R=["mat-header-cell",""];function V(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," C\xf3digo "),a.Zb())}const U=["mat-cell",""];function O(t,c){if(1&t&&(a.bc(0,"td",U),a.Hc(1),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",t.codigo," ")}}function X(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," Descripci\xf3n "),a.Zb())}function x(t,c){if(1&t&&(a.bc(0,"td",U),a.Hc(1),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",t.descripcion," ")}}function Y(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," Unidad "),a.Zb())}function $(t,c){if(1&t&&(a.bc(0,"td",U),a.Hc(1),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",t.unidad," ")}}function k(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," Cantidad "),a.Zb())}function M(t,c){if(1&t&&(a.bc(0,"td",U),a.Hc(1),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",t.cantidad," ")}}function j(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," Valor Unitario "),a.Zb())}function J(t,c){if(1&t&&(a.bc(0,"td",U),a.Hc(1),a.nc(2,"currency"),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",a.oc(2,1,t.valorUnitario)," ")}}function A(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," Valor Parcial "),a.Zb())}function L(t,c){if(1&t&&(a.bc(0,"td",U),a.Hc(1),a.nc(2,"currency"),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",a.oc(2,1,t.valorUnitario*t.cantidad)," ")}}function N(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," Aporte "),a.Zb())}function T(t,c){if(1&t&&(a.bc(0,"td",U),a.Hc(1),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",t.aporte," ")}}function z(t,c){1&t&&a.Vb(0,"th",R)}function E(t,c){1&t&&(a.bc(0,"th",R),a.Hc(1," Porcentaje "),a.Zb())}const _=["mat-icon-button","",3,"click"];function B(t,c){if(1&t){const t=a.cc();a.bc(0,"td",U),a.bc(1,"button",_),a.hc("click",(function(e){a.wc(t);const o=c.index,i=c.$implicit;return a.mc().deleteRow(o,i)})),a.bc(2,"mat-icon"),a.Hc(3,"delete"),a.Zb(),a.Zb(),a.Zb()}}const F=["mat-footer-cell",""];function q(t,c){1&t&&a.Vb(0,"td",F)}const Q=["mat-header-row",""];function K(t,c){1&t&&a.Vb(0,"tr",Q)}const W=["mat-row",""];function tt(t,c){1&t&&a.Vb(0,"tr",W)}let ct=(()=>{class t{constructor(t,c){this.itemService=t,this.proyectoService=c,this.items=[],this.data=[],this.capituloId=0,this.save=new a.s,this.displayedColumns=["codigo","descripcion","unidad","cantidad","precio","parcial","aporte","delete"]}ngOnInit(){this.itemService.getItemByCapituloId(this.capituloId).subscribe(t=>{console.log(t),t.model.forEach(t=>{t.valorParcial=t.valorUnitario*t.cantidad,console.log(t),this.addRow(t)}),console.log(this.data)},t=>{console.error(t.error)})}addRow(t){this.items.push(t),this.data=[...this.items]}saveChanges(t){this.save.emit(this.data)}deleteRow(t,c){this.items.splice(t,1),this.data=[...this.items],0!==c.capituloId&&0!==c.numeroCapitulo&&this.putItem(c)}putItem(t){t.capituloId=0,t.numeroCapitulo=0,this.itemService.putItem(t).subscribe(t=>{console.log(t)},t=>{console.log(t.error)})}}return t.ngComponentDef=a.Ob({type:t,selectors:[["app-chapter-table"]],factory:function(c){return new(c||t)(a.Ub(s.a),a.Ub(l.a))},inputs:{capituloId:"capituloId",isProcesing:"isProcesing"},outputs:{save:"save"},consts:36,vars:4,template:function(t,c){1&t&&(a.bc(0,"mat-card"),a.bc(1,"mat-card-header"),a.bc(2,"mat-card-title"),a.Hc(3," Capitulos "),a.Zb(),a.Zb(),a.bc(4,"mat-card-content"),a.bc(5,"table",p),a.Yb(6,h),a.Gc(7,V,2,0,"th",f),a.Gc(8,O,2,1,"td",g),a.Xb(),a.Yb(9,C),a.Gc(10,X,2,0,"th",f),a.Gc(11,x,2,1,"td",g),a.Xb(),a.Yb(12,y),a.Gc(13,Y,2,0,"th",f),a.Gc(14,$,2,1,"td",g),a.Xb(),a.Yb(15,Z),a.Gc(16,k,2,0,"th",f),a.Gc(17,M,2,1,"td",g),a.Xb(),a.Yb(18,w),a.Gc(19,j,2,0,"th",f),a.Gc(20,J,3,3,"td",g),a.Xb(),a.Yb(21,v),a.Gc(22,A,2,0,"th",f),a.Gc(23,L,3,3,"td",g),a.Xb(),a.Yb(24,D),a.Gc(25,N,2,0,"th",f),a.Gc(26,T,2,1,"td",g),a.Xb(),a.Yb(27,G),a.Gc(28,z,1,0,"th",f),a.Gc(29,E,2,0,"th",f),a.Gc(30,B,4,0,"td",g),a.Gc(31,q,1,0,"td",H),a.Xb(),a.Gc(32,K,1,0,"tr",I),a.Gc(33,tt,1,0,"tr",P),a.Zb(),a.Zb(),a.bc(34,"button",S),a.hc("click",(function(t){return c.saveChanges(c.data)})),a.Hc(35,"Guardar Cambios"),a.Zb(),a.Zb()),2&t&&(a.yc(5),a.rc("dataSource",c.data),a.yc(32),a.rc("matHeaderRowDef",c.displayedColumns),a.yc(33),a.rc("matRowDefColumns",c.displayedColumns),a.yc(34),a.rc("disabled",c.isProcesing))},directives:[d.a,d.d,d.f,d.c,b.n,b.c,b.i,b.b,b.e,b.k,b.m,u.b,b.h,b.a,m.a,b.d,b.j,b.l],pipes:[n.d],styles:[""]}),t})();var et=e("SU0D"),ot=e("tyNb"),it=e("SnT8"),at=e("IRfi"),nt=e("A2Vd"),rt=e("2xwa");const st=[3,"formGroup"],lt=["cols","5","rowHeight","500px",1,"full-width"],dt=[3,"colspan","rowspan"],bt=[1,"full-width","full-height"],ut=[1,"row"],mt=[1,"col"],pt=[1,"full-width"],ht=["placeholder","Numero","formControlName","numero","matInput","","type","text"],ft=["placeholder","Descripcion","formControlName","descripcion","matInput","","type","text","matTextareaAutosize","","matAutosizeMinRows","3","matAutosizeMaxRows","6"],gt=[3,"isProcesing","capituloId","save"],Ct=[3,"itemSelected"];let yt=(()=>{class t{constructor(t,c,e,o,i){this.formBuilder=t,this.proyectoService=c,this.capituloService=e,this.itemService=o,this.route=i,this.isProcesing=!1,this.itemsAgregados=0,this.id=0,this.buildForm()}ngOnInit(){this.proyectoService.project$.subscribe(t=>{this.proyecto=t}),this.route.params.pipe(Object(r.a)(t=>(this.id=t.id,console.log(this.id),this.capituloService.getCapituloById(t.id)))).subscribe(t=>{this.capitulo=t.model,console.log(t),this.buildForm()})}buildForm(){this.form=this.formBuilder.group({numero:[this.capitulo?this.capitulo.numero:"",[o.o.required]],descripcion:[this.capitulo?this.capitulo.descripcion:"",[o.o.required]]})}addItem(t){console.log(t),this.itemsAgregados++,t.numeroCapitulo=this.itemsAgregados,this.chapterTableComponent.addRow(t)}createCapitulo(t){this.isProcesing=!0,console.log(t);const c=t.map(t=>t.valorParcial).reduce((t,c)=>t+c,0),e={id:Number(this.id),proyectoId:this.proyecto.id,numero:parseInt(this.form.get("numero").value,10),descripcion:this.form.get("descripcion").value,subtotal:Math.round(c)};console.log(e),0===this.id?this.postCapitulo(e,t):this.putCapitulo(e,t)}postCapitulo(t,c){this.capituloService.postCapitulo(t).subscribe(t=>{console.log(t),this.capitulo=t.model;let e=1;c.forEach(t=>{t.capituloId=this.capitulo.id,t.numeroCapitulo=e,e++,this.putItem(t)})},t=>{console.error(t.error),this.isProcesing=!1})}putCapitulo(t,c){this.capituloService.putCapitulo(t).subscribe(t=>{console.log(t)},t=>{console.error(t.error),this.isProcesing=!1});let e=1;c.forEach(t=>{t.capituloId=this.capitulo.id,t.numeroCapitulo=e,e++,this.putItem(t)})}putItem(t){this.itemService.putItem(t).subscribe(t=>{console.log(t),this.isProcesing=!1},t=>{console.log(t.error),this.isProcesing=!1})}}return t.ngComponentDef=a.Ob({type:t,selectors:[["app-chapter"]],factory:function(c){return new(c||t)(a.Ub(o.c),a.Ub(l.a),a.Ub(et.a),a.Ub(s.a),a.Ub(ot.a))},viewQuery:function(t,c){var e;1&t&&a.Lc(ct,!0),2&t&&a.tc(e=a.jc())&&(c.chapterTableComponent=e.first)},consts:22,vars:7,template:function(t,c){1&t&&(a.bc(0,"form",st),a.bc(1,"mat-grid-list",lt),a.bc(2,"mat-grid-tile",dt),a.bc(3,"mat-card",bt),a.bc(4,"mat-card-header"),a.bc(5,"mat-card-title"),a.Hc(6," Item "),a.Zb(),a.Zb(),a.bc(7,"mat-card-content"),a.bc(8,"div",ut),a.bc(9,"div",mt),a.bc(10,"mat-form-field",pt),a.Vb(11,"input",ht),a.Zb(),a.Zb(),a.Zb(),a.bc(12,"div",ut),a.bc(13,"div",mt),a.bc(14,"mat-form-field",pt),a.Vb(15,"textarea",ft),a.Zb(),a.Zb(),a.Zb(),a.bc(16,"div",ut),a.bc(17,"div",mt),a.bc(18,"app-chapter-table",gt),a.hc("save",(function(t){return c.createCapitulo(t)})),a.Zb(),a.Zb(),a.Zb(),a.Zb(),a.Zb(),a.Zb(),a.bc(19,"mat-grid-tile",dt),a.bc(20,"div",bt),a.bc(21,"app-item-table",Ct),a.hc("itemSelected",(function(t){return c.addItem(t)})),a.Zb(),a.Zb(),a.Zb(),a.Zb(),a.Zb()),2&t&&(a.rc("formGroup",c.form),a.yc(2),a.rc("colspan",3)("rowspan",2),a.yc(18),a.rc("isProcesing",c.isProcesing)("capituloId",c.id),a.yc(19),a.rc("colspan",2)("rowspan",2))},directives:[o.p,o.k,o.e,it.a,it.c,d.a,d.d,d.f,d.c,at.b,o.a,nt.b,o.j,o.d,nt.d,ct,rt.a],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.full-height[_ngcontent-%COMP%]{height:100%}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}.buttons[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"]}),t})();const Zt=["mat-button","","color","primary",3,"routerLink"],wt=["mat-table","",1,"mat-elevation-z8",3,"dataSource"],vt=["matColumnDef","codigo"],Dt=["mat-header-cell","",4,"matHeaderCellDef"],Gt=["mat-cell","",4,"matCellDef"],Ht=["matColumnDef","descripcion"],It=["matColumnDef","parcial"],Pt=["matColumnDef","edit"],St=["mat-footer-cell","",4,"matFooterCellDef"],Rt=["matColumnDef","delete"],Vt=["mat-header-row","",4,"matHeaderRowDef"],Ut=["mat-row","",4,"matRowDef","matRowDefColumns"],Ot=["mat-header-cell",""];function Xt(t,c){1&t&&(a.bc(0,"th",Ot),a.Hc(1," C\xf3digo "),a.Zb())}const xt=["mat-cell",""];function Yt(t,c){if(1&t&&(a.bc(0,"td",xt),a.Hc(1),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",t.codigo," ")}}function $t(t,c){1&t&&(a.bc(0,"th",Ot),a.Hc(1," Descripci\xf3n "),a.Zb())}function kt(t,c){if(1&t&&(a.bc(0,"td",xt),a.Hc(1),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",t.descripcion," ")}}function Mt(t,c){1&t&&(a.bc(0,"th",Ot),a.Hc(1," Valor Parcial "),a.Zb())}function jt(t,c){if(1&t&&(a.bc(0,"td",xt),a.Hc(1),a.nc(2,"currency"),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.Jc(" ",a.oc(2,1,t.valorUnitario*t.cantidad)," ")}}function Jt(t,c){1&t&&a.Vb(0,"th",Ot)}function At(t,c){1&t&&a.Vb(0,"th",Ot)}const Lt=["mat-icon-button","",3,"routerLink"],Nt=function(t){return["/chapter/edit",t]};function Tt(t,c){if(1&t&&(a.bc(0,"td",xt),a.bc(1,"a",Lt),a.bc(2,"mat-icon"),a.Hc(3,"edit"),a.Zb(),a.Zb(),a.Zb()),2&t){const t=c.$implicit;a.yc(1),a.rc("routerLink",a.sc(1,Nt,t.id))}}const zt=["mat-footer-cell",""];function Et(t,c){1&t&&a.Vb(0,"td",zt)}function _t(t,c){1&t&&a.Vb(0,"th",Ot)}function Bt(t,c){1&t&&(a.bc(0,"th",Ot),a.Hc(1," Porcentaje "),a.Zb())}const Ft=["mat-icon-button","","aria-label","Example icon-button with a heart icon"];function qt(t,c){1&t&&(a.bc(0,"td",xt),a.bc(1,"button",Ft),a.bc(2,"mat-icon"),a.Hc(3,"delete"),a.Zb(),a.Zb(),a.Zb())}function Qt(t,c){1&t&&a.Vb(0,"td",zt)}const Kt=["mat-header-row",""];function Wt(t,c){1&t&&a.Vb(0,"tr",Kt)}const tc=["mat-row",""];function cc(t,c){1&t&&a.Vb(0,"tr",tc)}const ec=["/chapter/create"],oc=[{path:"",component:(()=>{class t{constructor(t,c){this.capituloService=t,this.proyectoService=c,this.displayedColumns=["codigo","descripcion","parcial","edit","delete"]}ngOnInit(){this.proyectoService.project$.pipe(Object(r.a)(t=>(this.proyecto=t,this.capituloService.getCapitulosByProyectoId(t.id)))).subscribe(t=>{this.capitulos=t.model})}}return t.ngComponentDef=a.Ob({type:t,selectors:[["app-chapter-list"]],factory:function(c){return new(c||t)(a.Ub(et.a),a.Ub(l.a))},consts:29,vars:4,template:function(t,c){1&t&&(a.bc(0,"mat-card"),a.bc(1,"mat-card-header"),a.bc(2,"mat-card-title"),a.Hc(3," Capitulos "),a.Zb(),a.bc(4,"a",Zt),a.Hc(5,"CREAR NUEVO CAPITULO"),a.Zb(),a.Zb(),a.bc(6,"mat-card-content"),a.bc(7,"table",wt),a.Yb(8,vt),a.Gc(9,Xt,2,0,"th",Dt),a.Gc(10,Yt,2,1,"td",Gt),a.Xb(),a.Yb(11,Ht),a.Gc(12,$t,2,0,"th",Dt),a.Gc(13,kt,2,1,"td",Gt),a.Xb(),a.Yb(14,It),a.Gc(15,Mt,2,0,"th",Dt),a.Gc(16,jt,3,3,"td",Gt),a.Xb(),a.Yb(17,Pt),a.Gc(18,Jt,1,0,"th",Dt),a.Gc(19,At,1,0,"th",Dt),a.Gc(20,Tt,4,3,"td",Gt),a.Gc(21,Et,1,0,"td",St),a.Xb(),a.Yb(22,Rt),a.Gc(23,_t,1,0,"th",Dt),a.Gc(24,Bt,2,0,"th",Dt),a.Gc(25,qt,4,0,"td",Gt),a.Gc(26,Qt,1,0,"td",St),a.Xb(),a.Gc(27,Wt,1,0,"tr",Vt),a.Gc(28,cc,1,0,"tr",Ut),a.Zb(),a.Zb(),a.Zb()),2&t&&(a.yc(4),a.rc("routerLink",ec),a.yc(7),a.rc("dataSource",c.capitulos),a.yc(27),a.rc("matHeaderRowDef",c.displayedColumns),a.yc(28),a.rc("matRowDefColumns",c.displayedColumns))},directives:[d.a,d.d,d.f,u.a,ot.c,d.c,b.n,b.c,b.i,b.b,b.e,b.k,b.m,b.h,b.a,m.a,b.d,u.b,b.j,b.l],pipes:[n.d],styles:[""]}),t})()},{path:"create",component:yt},{path:"edit/:id",component:yt}];let ic=(()=>{class t{}return t.ngModuleDef=a.Sb({type:t}),t.ngInjectorDef=a.Rb({factory:function(c){return new(c||t)},imports:[[ot.d.forChild(oc)],ot.d]}),t})();ot.d.forChild(oc);var ac=e("PCNd");e.d(c,"ChapterModule",(function(){return nc}));let nc=(()=>{class t{}return t.ngModuleDef=a.Sb({type:t}),t.ngInjectorDef=a.Rb({factory:function(c){return new(c||t)},imports:[[n.c,ic,ac.a,i.a,o.n]]}),t})()}}]);